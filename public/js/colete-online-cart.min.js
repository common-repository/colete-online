"use strict";function ownKeys(t,e){var c,n=Object.keys(t);return Object.getOwnPropertySymbols&&(c=Object.getOwnPropertySymbols(t),e&&(c=c.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,c)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(c),!0).forEach(function(e){_defineProperty(t,e,c[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))})}return t}function _defineProperty(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}jQuery(function(r){if("undefined"==typeof wc_cart_params)return!1;var n=wc_cart_params.ajax_url;function i(e){return-1<["S1","S2","S3","S4","S5","S6"].indexOf(e)}function c(e,t){e.find("option[value='"+t+"']").length?e.val(t).trigger("change"):(t=new Option(t,t,!0,!0),e.append(t).trigger("change"))}"undefined"!=typeof customAjaxPath&&void 0!==customAjaxPath.pluginsUrl&&(n=customAjaxPath.pluginsUrl);var t=!1;function a(){t=!0,r.ajax({type:"GET",url:n,data:{action:"coleteonline_reverse_postal_code_search",postal_code:r("#calc_shipping_postcode").val(),country:r("#calc_shipping_country").val()},success:function(e){if(!0!==(e=JSON.parse(e)).error){if(!e.length&&!Object.keys(e).length)return t=!1,void r("#calc_shipping_postcode").addClass("woocommerce-invalid");i(e.countyCode)?(r("#calc_shipping_state").val("B"),r("#calc_shipping_state").trigger("change"),r("#calc_shipping_city").val(e.countyCode),c(r("#calc_shipping_locality"),e.locality.county)):(r("#calc_shipping_state").val(e.countyCode),r("#calc_shipping_state").trigger("change"),r("#calc_shipping_city").val(e.locality.city),c(r("#calc_shipping_locality"),e.locality.city)),t=!1}else t=!1}})}var o=0;function l(e){!0===t&&o<10?(e.preventDefault(),setTimeout(function(){++o,r("button[name='calc_shipping']").click()},1e3)):o=0}function p(e){if(r("button[name='calc_shipping']").unbind("click"),r("button[name='calc_shipping']").click(l),r("#calc_shipping_postcode").change(a),r("#calc_shipping_country").unbind("change"),r("#calc_shipping_country").change(function(){p()}),"RO"!==r("#calc_shipping_country").val())return r("#calc_shipping_city_field input").show(),void r("#calc_shipping_locality_wrapper").remove();var t={ajax:{url:n,dataType:"json",delay:300,data:function(e){return"B"===r("#calc_shipping_state").val()&&(e.term||(e.term="Sectorul")),{action:"coleteonline_autocomplete_city",country:r("#calc_shipping_country").val(),county_code:r("#calc_shipping_state").val(),q:e.term,page:null!==(e=e.page)&&void 0!==e?e:1}},processResults:function(e,t){if(!0===e.error)return{results:[{text:t.term,id:t.term}],pagination:{more:!1}};for(var c=function(e){return{text:e.localityName,id:e.localityName,countyCode:e.countyCode,cityName:e.localityName,countyName:e.countyName}},n=function(e){return{text:e.countyName,id:e.countyName,countyCode:e.countyCode,cityName:e.countyName,countyName:e.localityName}},i=[],a=0;a<e.data.length;++a){var o=e.data[a],l=c;"B"===r("#calc_shipping_state").val()&&(l=n),o.list?i.push({text:o.upLocality+":",children:o.list.map(l)}):i.push(l(o))}t=e.pagination;return{results:i,pagination:{more:t.currentPage<t.totalPages}}}},language:{errorLoading:function(){return coleteOnlineLanguage.localitySearch.errorLoading},inputTooLong:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.localitySearch.inputTooLong.replace("%d",e)},inputTooShort:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.localitySearch.inputTooShort.replace("%d",e)},loadingMore:function(){return coleteOnlineLanguage.localitySearch.loadingMore},noResults:function(){return coleteOnlineLanguage.localitySearch.noResults},searching:function(){return coleteOnlineLanguage.localitySearch.searching},removeAllItems:function(){return coleteOnlineLanguage.localitySearch.removeAllItems},removeItem:function(){return coleteOnlineLanguage.localitySearch.removeItem},search:function(){return coleteOnlineLanguage.localitySearch.search}},width:"100%",minimumInputLength:"B"===r("#calc_shipping_state").val()?0:2,selectOnClose:"yes"===coleteOnlineOptions.autoSelectCity,templateSelection:function(e){return""===e.id?""===r("#calc_shipping_state").val()?shippingCityTranslations.emptyState:shippingCityTranslations.nonEmptyState:e.text}};r("#calc_shipping_city_field input").hide(),r("#calc_shipping_locality_wrapper").remove();e=r("#calc_shipping_city").val();["S1","S2","S3","S4","S5","S6"].includes(e)&&(e=e.replace("S","Sectorul ")),r("#calc_shipping_city_field").append('\n      <div id="calc_shipping_locality_wrapper">\n        <select id="calc_shipping_locality">\n          <option value="'.concat(e,'">\n            ').concat(e,"\n          </option>\n        </select>\n      </div>\n    ")),r("#calc_shipping_locality").select2(t),r("#calc_shipping_state").val(),"no"===coleteOnlineOptions.postalCodePosition?r("#calc_shipping_postcode_field").hide():"before"===coleteOnlineOptions.postalCodePosition&&r("#calc_shipping_postcode_field").insertAfter("#calc_shipping_country_field"),setTimeout(function(){r("#calc_shipping_state").on("select2:select",function(){r("#calc_shipping_locality").val(null).trigger("change"),c(r("#calc_shipping_locality"),""),r("#calc_shipping_city").val(""),""===r("#calc_shipping_state").val()?r("#calc_shipping_locality").attr("disabled","disabled"):r("#calc_shipping_locality").removeAttr("disabled"),r("#calc_shipping_locality").trigger("change"),"B"===r("#calc_shipping_state").val()?r("#calc_shipping_locality").select2(_objectSpread(_objectSpread({},t),{},{minimumInputLength:0})):r("#calc_shipping_locality").select2(_objectSpread(_objectSpread({},t),{},{minimumInputLength:2}))}),r("#calc_shipping_locality").unbind("select2:select"),r("#calc_shipping_locality").on("select2:select",function(e){var t,c;"B"===r("#calc_shipping_state").val()?r("#calc_shipping_city").val(null===(c=e.params)||void 0===c?void 0:c.data.countyCode):r("#calc_shipping_city").val(null===(t=e.params)||void 0===t?void 0:t.data.cityName),c=r("#calc_shipping_state").val(),i(e=r("#calc_shipping_city").val())&&(e=(t=[c,e])[0],c=t[1],e="Bucuresti"),r.ajax({type:"GET",url:n,data:{action:"coleteonline_postal_code_search",country:r("#calc_shipping_country").val(),street:"--",county:c,city:e,validate_street:2},success:function(e){!0!==(e=JSON.parse(e)).error&&e.codes.length&&(r("#calc_shipping_postcode").val(e.codes[0].code),r("body").trigger("update_checkout"))}})})},500)}p(),function(){var e=r("select[id^='coleteonline_service_shipping_point-']");console.log(e,"SELECTURILE");for(var t=0;t<e.length;++t)r(e[t]).hide()}();r(document.body).on("updated_wc_div wc_fragments_loaded wc_fragments_refreshed wc_cart_button_updated added_to_cart removed_from_cart updated_shipping_method",function(){p()})});